# ä¸œæ–¹è´¢å¯Œè‚¡ç¥¨æŸ¥è¯¢åº“ (EMXG)

ä¸€ä¸ªç”¨äºæŸ¥è¯¢ä¸œæ–¹è´¢å¯Œç½‘è‚¡ç¥¨æ•°æ®å¹¶è¿”å›DataFrameæ ¼å¼çš„Pythonåº“ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ ç®€å•æ˜“ç”¨çš„APIæ¥å£
- ğŸ“Š è¿”å›pandas DataFrameæ ¼å¼æ•°æ®
- ğŸ” æ”¯æŒå¤šç§è‚¡ç¥¨æŸ¥è¯¢æ–¹å¼
- ğŸ’¾ æ”¯æŒæ•°æ®å¯¼å‡ºä¸ºCSV/Excelæ ¼å¼
- ğŸ›¡ï¸ è‡ªåŠ¨å¤„ç†ä¼šè¯å’Œè®¤è¯
- ğŸ“ å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½
- âš¡ å®¢æˆ·ç«¯å®ä¾‹ç¼“å­˜ï¼Œæé«˜æ€§èƒ½
- ğŸ”„ è‡ªåŠ¨æ•°æ®ç±»å‹è½¬æ¢å’Œå•ä½å¤„ç†

## å®‰è£…

```bash
pip install -r requirements.txt
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```python
from emxg import EMStockClient, search_emxg

# æ–¹æ³•1: ä½¿ç”¨å®¢æˆ·ç«¯ç±»
client = EMStockClient()

# è·å–æ¶¨åœæ¿è‚¡ç¥¨æ•°æ®ï¼ˆè‡ªåŠ¨è·å–æ‰€æœ‰æ•°æ®ï¼‰
df = client.search(keyword="ä»Šæ—¥æ¶¨åœ", page_size=50)
print(df.head())

# é™åˆ¶è·å–æ•°é‡
df = client.search(keyword="ä»Šæ—¥æ¶¨åœ", max_count=20)
print(df.head())

# æœç´¢ç‰¹å®šå…³é”®è¯
df = client.search(keyword="æ¶¨åœæ¿é¦–æ¿", page_size=30, max_page=2)
print(df.head())

# æ–¹æ³•2: ä½¿ç”¨ä¾¿æ·å‡½æ•°ï¼ˆæ¨èï¼‰
df = search_emxg("ä»Šæ—¥æ¶¨åœ", max_count=50)
print(df.head())

# ä¿å­˜æ•°æ®
df.to_csv('stocks.csv', index=False, encoding='utf-8-sig')
```

### è¿è¡Œç¤ºä¾‹

```bash
# åŸºæœ¬ç¤ºä¾‹
python example.py

# é«˜çº§ç¤ºä¾‹ï¼ˆåŒ…å«æ•°æ®åˆ†æï¼‰
python advanced_example.py
```

## APIæ–‡æ¡£

### EMStockClient

ä¸»è¦çš„å®¢æˆ·ç«¯ç±»ï¼Œç”¨äºæŸ¥è¯¢è‚¡ç¥¨æ•°æ®ã€‚

#### æ–¹æ³•

- `search(keyword="ä»Šæ—¥æ¶¨åœ", page_size=50, max_count=None, max_page=None)` - æœç´¢è‚¡ç¥¨æ•°æ®

### search_emxg (ä¾¿æ·å‡½æ•°)

æ¨èä½¿ç”¨çš„ä¾¿æ·å‡½æ•°ï¼Œå†…éƒ¨ä½¿ç”¨ç¼“å­˜çš„å®¢æˆ·ç«¯å®ä¾‹ï¼Œæé«˜æ€§èƒ½ã€‚

#### æ–¹æ³•ç­¾å

```python
search_emxg(keyword: str, max_count: Optional[int] = None, max_page: Optional[int] = None) -> pd.DataFrame
```

#### å‚æ•°è¯´æ˜

- `keyword` - æŸ¥è¯¢å…³é”®è¯ï¼Œé»˜è®¤"ä»Šæ—¥æ¶¨åœ"
- `page_size` - æ¯é¡µæ•°é‡ï¼Œé»˜è®¤50
- `max_count` - æœ€å¤§è¿”å›æ•°æ®æ¡æ•°ï¼ŒNoneè¡¨ç¤ºä¸é™åˆ¶
- `max_page` - æœ€å¤§é¡µæ•°ï¼ŒNoneè¡¨ç¤ºä¸é™åˆ¶

#### æ•°æ®è‡ªåŠ¨å¤„ç†

- **è‡ªåŠ¨åˆ†é¡µ**: é»˜è®¤è·å–æ‰€æœ‰æ•°æ®ï¼Œæ”¯æŒé™åˆ¶æ¡æ•°æˆ–é¡µæ•°
- **æ•°å€¼è½¬æ¢**: è‡ªåŠ¨å°†"3.42äº¿"ã€"7668.05ä¸‡"ç­‰è½¬æ¢ä¸ºå¯¹åº”æ•°å€¼
- **ç™¾åˆ†æ¯”è½¬æ¢**: è‡ªåŠ¨å°†ç™¾åˆ†æ¯”å­—æ®µè½¬æ¢ä¸ºå°æ•°ï¼ˆå¦‚20.05% â†’ 0.2005ï¼‰
- **æ•°æ®ç±»å‹**: æ ¹æ®APIè¿”å›çš„å­—æ®µä¿¡æ¯è‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹

#### è¿”å›æ•°æ®å­—æ®µ

è¿”å›çš„DataFrameåŒ…å«ä»¥ä¸‹ä¸»è¦å­—æ®µï¼š

- `ä»£ç ` - è‚¡ç¥¨ä»£ç 
- `åç§°` - è‚¡ç¥¨åç§°  
- `æœ€æ–°ä»·` - æœ€æ–°ä»·æ ¼ï¼ˆæ•°å€¼ï¼‰
- `æ¶¨è·Œå¹…` - æ¶¨è·Œå¹…ï¼ˆå°æ•°ï¼Œå¦‚0.2005è¡¨ç¤º20.05%ï¼‰
- `æˆäº¤é¢` - æˆäº¤é‡‘é¢ï¼ˆæ•°å€¼ï¼Œå•ä½ï¼šå…ƒï¼‰
- `æˆäº¤é‡(è‚¡)` - æˆäº¤é‡ï¼ˆæ•°å€¼ï¼‰
- `æ¢æ‰‹ç‡` - æ¢æ‰‹ç‡ï¼ˆå°æ•°ï¼Œå¦‚0.1224è¡¨ç¤º12.24%ï¼‰
- `å¸‚ç›ˆç‡(åŠ¨)(å€)` - åŠ¨æ€å¸‚ç›ˆç‡ï¼ˆæ•°å€¼ï¼‰
- `å¸‚å‡€ç‡(å€)` - å¸‚å‡€ç‡ï¼ˆæ•°å€¼ï¼‰
- `æ€»å¸‚å€¼(æ—¥çº¿ä¸å¤æƒ)` - æ€»å¸‚å€¼ï¼ˆæ•°å€¼ï¼Œå•ä½ï¼šå…ƒï¼‰
- `æµé€šå¸‚å€¼(æ—¥çº¿ä¸å¤æƒ)` - æµé€šå¸‚å€¼ï¼ˆæ•°å€¼ï¼Œå•ä½ï¼šå…ƒï¼‰

## ä½¿ç”¨ç¤ºä¾‹

### æ—¥å¿—é…ç½®

åº“ä½¿ç”¨æ ‡å‡†çš„Python loggingæ¨¡å—ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ¥æ§åˆ¶æ—¥å¿—è¾“å‡ºï¼š

```python
import logging
from emxg import search_emxg

# é…ç½®æ—¥å¿—çº§åˆ«å’Œæ ¼å¼
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

# ç°åœ¨å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„è·å–è¿‡ç¨‹
df = search_emxg("ä»Šæ—¥æ¶¨åœ", max_count=20)
```

### æ•°æ®åˆ†æç¤ºä¾‹

```python
from emxg import search_emxg

# ä½¿ç”¨ä¾¿æ·å‡½æ•°è·å–æ•°æ®
df = search_emxg("ä»Šæ—¥æ¶¨åœ", max_count=50)

# æ•°æ®åˆ†æï¼ˆæ³¨æ„ï¼šç™¾åˆ†æ¯”å­—æ®µå·²è½¬æ¢ä¸ºå°æ•°ï¼‰
high_turnover = df[df['æ¢æ‰‹ç‡'] > 0.10]  # æ¢æ‰‹ç‡>10%
print(f"æ¢æ‰‹ç‡è¶…è¿‡10%çš„è‚¡ç¥¨: {len(high_turnover)}åª")

# æŒ‰æ¶¨è·Œå¹…æ’åº
df_sorted = df.sort_values('æ¶¨è·Œå¹…', ascending=False)
print("æ¶¨å¹…æœ€é«˜çš„å‰5åªè‚¡ç¥¨:")
for _, row in df_sorted[['åç§°', 'æ¶¨è·Œå¹…']].head().iterrows():
    print(f"{row['åç§°']}: {row['æ¶¨è·Œå¹…']*100:.2f}%")

# æˆäº¤é¢åˆ†æï¼ˆå·²è½¬æ¢ä¸ºæ•°å€¼ï¼‰
high_volume = df[df['æˆäº¤é¢'] > 500000000]  # æˆäº¤é¢>5äº¿
print(f"æˆäº¤é¢è¶…è¿‡5äº¿çš„è‚¡ç¥¨: {len(high_volume)}åª")

# ç»¼åˆç­›é€‰ï¼šé«˜æ¶¨å¹… + é«˜æˆäº¤é¢ + é€‚ä¸­æ¢æ‰‹ç‡
quality_stocks = df[
    (df['æ¶¨è·Œå¹…'] > 0.15) &  # æ¶¨å¹…>15%
    (df['æˆäº¤é¢'] > 200000000) &  # æˆäº¤é¢>2äº¿
    (df['æ¢æ‰‹ç‡'] > 0.05) &  # æ¢æ‰‹ç‡>5%
    (df['æ¢æ‰‹ç‡'] < 0.30)   # æ¢æ‰‹ç‡<30%
]
print(f"é«˜è´¨é‡è‚¡ç¥¨: {len(quality_stocks)}åª")
```

## APIæ¥å£ä¿¡æ¯

POST: https://np-tjxg-b.eastmoney.com/api/smart-tag/stock/v3/pw/search-code

### è¯·æ±‚å‚æ•°
- keyWord: æŸ¥è¯¢å…³é”®è¯ï¼Œå¦‚"ä»Šæ—¥æ¶¨åœæ¿é¦–æ¿;"
- pageSize: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤50
- pageNo: é¡µç ï¼Œé»˜è®¤1
- fingerprint: æ¥è‡ªcookieä¸­çš„qgqp_b_id
- timestamp: å¾®ç§’æ—¶é—´æˆ³
- requestId: éšæœºç”Ÿæˆçš„è¯·æ±‚ID

>>>>>>> ğŸ‰ Initial release: EMXG v2.0.0
